#! /usr/bin/env sh

BUILD_DIR=${BUILD_DIR-build}

mkdir -p $BUILD_DIR

echo "Building xterm.js into $BUILD_DIR..."

# Build ES6 modules into
echo "  - Building $BUILD_DIR/xterm.js..."
./node_modules/.bin/browserify src/xterm.js -s xterm -t [ babelify --presets [ es2015 ] ] --debug | \
node_modules/.bin/derequire | \
node_modules/.bin/exorcist $BUILD_DIR/xterm.js.map > $BUILD_DIR/xterm.js
echo "    OK."

# Copy CSS into $BUILD_DIR
echo "  - Building $BUILD_DIR/xterm.css..."
cp src/xterm.css $BUILD_DIR/xterm.css
echo "    OK."
